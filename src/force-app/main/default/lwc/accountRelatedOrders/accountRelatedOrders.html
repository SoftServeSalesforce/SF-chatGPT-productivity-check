<template>
    <lightning-card title="Account Related Orders">
        <template lwc:if={orders}>
          <div class="slds-m-around_medium">
            <template lwc:if={error}>{error}</template>
            <table class="slds-table_bordered" aria-label="Orders List">
                <thead>
                    <tr>
                        <th scope="col">Number</th>
                        <th scope="col">Date</th>
                        <th scope="col">Status</th>
                        <th scope="col">Amount</th>
                        <th scope="col">Invoice</th> 
                        <th scope="col">Actions</th> 
                    </tr>
                </thead>
                <tbody>
                    <template for:each={orders} for:item="order">
                        <tr key={order.orderId}>
                            <td><a data-id={order.orderId} onclick={handleOrderNumberClick}>{order.orderNumber}</a></td>
                            <td>{order.startDate}</td>                            
                            <td>{order.orderStatus}</td>
                            <td><lightning-formatted-number value={order.amount} format-style="currency" currency-code="USD" currency-display-as="symbol"></lightning-formatted-number></td>
                            <template lwc:if={order.contentDocumentId}><lightning-icon data-id={order.contentDocumentId} size="small" icon-name="utility:download" alternative-text="Download Invoice" onclick={handleDownloadInvoice}></lightning-icon></template>
                            <template lwc:else><td></td></template>
                            <td><lightning-combobox key={order.orderId} data-id={order.orderId}
                                name="Action"                                
                                value={value}
                                options={rowActions}
                                onchange={handleActionSelected} ></lightning-combobox></td>                                                 
                        </tr>
                    </template>
                </tbody>
            </table>            
          </div>
        </template>
    </lightning-card>
</template>